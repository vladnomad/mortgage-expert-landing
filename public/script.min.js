"use strict";window.addEventListener("DOMContentLoaded",()=>{let e=document.querySelector("form"),t=document.querySelector("input[name='phone']"),s=document.querySelector("input[name='email']"),l=document.querySelector(".result"),i=document.querySelectorAll(".form-input"),a=localStorage.getItem("formSent"),r=document.querySelector("button[type='submit']"),n=document.querySelector(".form-button.--disabled");a&&(r.classList.add("hidden"),n.classList.remove("hidden"));let o=e=>{e.classList.remove("scale-1"),e.classList.add("scale-65")},c=e=>{e.classList.remove("opacity-0"),e.classList.add("opacity-75")},d=e=>{e.classList.remove("scale-65"),e.classList.add("scale-1")},m=e=>{e.classList.remove("opacity-75"),e.classList.add("opacity-0")},u="null";i.forEach(e=>{e.addEventListener("focus",e=>{let t=e.target.parentElement,s=t.querySelector(".form-input-label.--main"),l=t.querySelector(".form-input-label.--help");o(s),c(l)},!0),e.addEventListener("blur",e=>{let t=e.target.parentElement,s=t.querySelector(".form-input-label.--main"),l=t.querySelector(".form-input-label.--help");""===e.target.value&&d(s),m(l)},!0)});let L=e=>{let t=/^\+?\d{2,4}?[-.\s]?\d[-.\s]?\d{2,3}[-.\s]?\d{2,3}[-.\s]?\d{1,3}$/;return t.test(e)},p=e=>{let t=/^\S+@\S+\.\S+$/;return t.test(e)},y=e=>{e.classList.add("outline-active")},$=e=>{e.classList.remove("outline-active")},h=()=>{let e=!1;return L(t.value.trim())||""===t.value?($(t),e=!0):y(t),e},f=()=>{let e=!1;return p(s.value.trim())||""===s.value?($(s),e=!0):y(s),e};e.addEventListener("submit",function(t){t.preventDefault(),i.forEach(e=>{$(e)});let s=h(),a=f();if(s&&a){let o=new FormData(e),c=Object.fromEntries(o),L=JSON.stringify(c),p=document.querySelector(".result-container");l.innerHTML="Oczekuję na odpowiedź serwera...",p.classList.remove("opacity-0","-z-10"),p.classList.add("opacity-1","z-10"),o.forEach((e,t)=>{c[t]=e}),fetch("https://api.web3forms.com/submit",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:L}).then(async t=>{let s=await t.json();200==t.status?(u="contact_form_submit",l.innerHTML="Dziękuję za zgłoszenie!\n\nSkontaktuję się z Tobą w&nbsp;możliwie najkr\xf3tszym czasie.",p.classList.remove("opacity-0","-z-10"),p.classList.add("opacity-1","z-10"),e.setAttribute("disabled",!0),localStorage.setItem("formSent",!0),r.classList.add("hidden"),n.classList.remove("hidden"),i.forEach(e=>{e.setAttribute("disabled",!0)})):(l.innerHTML=s.message,p.classList.remove("opacity-0","-z-10"),p.classList.add("opacity-1","z-10"))}).catch(e=>{l.innerHTML="Ups! Nie udało się połączyć się z serwerem. Proszę, spr\xf3buj p\xf3żniej.\n\n"+e}).then(()=>{e.reset(),f(),h(),i.forEach(e=>{let t=e.parentElement,s=t.querySelector(".form-input-label.--main"),l=t.querySelector(".form-input-label.--help");d(s),m(l)}),setTimeout(()=>{p.classList.remove("opacity-1","z-10"),p.classList.add("opacity-0","-z-10")},5e3)})}});let b=e=>{let t;return(...s)=>{t&&clearTimeout(t),t=setTimeout(()=>{e.apply(null,s)},500)}};e.addEventListener("input",b(e=>{switch(e.target.name){case"phone":h();break;case"email":f()}}));let v=e.querySelector(".form-button"),_=document.querySelector("body");function E(){e.setAttribute("action","https://api.web3forms.com/submit"),v.removeAttribute("disabled")}_.addEventListener("mousemove",()=>E()),_.addEventListener("touchmove",()=>E()),_.addEventListener("keydown",function(e){("Tab"===e.key||"Enter"===e.key)&&E()});let S=document.querySelectorAll(".json-name"),g=document.querySelectorAll(".json-phone"),q=document.querySelector(".json-email-name"),A=document.querySelectorAll(".json-email-full"),k=document.querySelector(".json-tel"),w=document.querySelector(".json-mail-to"),x=document.querySelectorAll(".js-year"),T=document.querySelector(".json-title"),j=document.getElementById("bio1"),z=document.getElementById("bio2"),I=document.querySelectorAll(".reviews-author"),M=document.querySelectorAll(".reviews-author-logo"),H=document.querySelectorAll(".reviews-text"),B=()=>{let e=new Date;return e.getFullYear()};fetch("assets/data.json").then(e=>e.json()).then(e=>{if(document.title=e.name+" | Ekspert Finansowy ANG",q.innerHTML=e.email,k.setAttribute("href","tel:"+e.phone),w.setAttribute("href","mailto:"+e.email+e.emailDomain),S.forEach(t=>{t.innerHTML=e.name}),g.forEach(t=>{t.innerHTML=e.phone}),A.forEach(t=>{t.innerHTML=e.email+e.emailDomain}),x.forEach(e=>{e.innerHTML=B()}),null!==T){T.innerHTML=e.title,j.innerHTML=e.bio1,z.innerHTML=e.bio2;for(let t=0;t<12;t++)I[t].innerHTML=e.reviewAuthors[t],M[t].innerHTML=e.reviewAuthors[t].slice(0,1),H[t].innerHTML=e.reviewContents[t]}}).catch(e=>{alert(e)});let C=document.querySelectorAll(".reviews"),D=document.querySelectorAll(".--previous"),F=document.querySelectorAll(".--next"),G=0;function O(){C.forEach(e=>{e.classList.remove("flex"),e.classList.add("hidden")})}function P(){O(),11===G?(C[0].classList.remove("hidden"),C[0].classList.add("flex"),G=0):(C[G+1].classList.remove("hidden"),C[G+1].classList.add("flex"),++G)}function K(){O(),0===G?(C[11].classList.remove("hidden"),C[11].classList.add("flex"),G=11):(C[G-1].classList.remove("hidden"),C[G-1].classList.add("flex"),--G)}D.forEach(e=>{e.addEventListener("click",()=>{K()})}),F.forEach(e=>{e.addEventListener("click",()=>{P()})})}),window.addEventListener("load",()=>{let e=document.getElementById("loader-container"),t=document.getElementById("trigger"),s=document.querySelector(".menu-button"),l=document.querySelector(".menu-button.--close"),i=document.querySelector(".menu"),a=document.getElementById("mobile-form--button"),r=document.getElementById("mobile-form--button-icon"),n=document.getElementById("mobile-form--bg"),o=document.getElementById("mobile-form"),c=document.querySelectorAll(".header-link"),d=document.getElementById("disable"),m=document.getElementById("confirm"),u=document.getElementById("cookie-window"),L=document.getElementById("map"),p=sessionStorage.getItem("cookiesDisabled"),y=sessionStorage.getItem("cookiesConfirmed"),$=()=>{i.classList.remove("max-xl:hidden")},h=()=>{i.classList.add("max-xl:hidden")},f=()=>{n.classList.remove("absolute"),n.classList.add("fixed"),o.classList.remove("max-xl:hidden"),r.src="assets/img/icon--close.svg"},b=()=>{r.src="assets/img/icon--phone.svg",o.classList.add("max-xl:hidden"),n.classList.remove("fixed"),n.classList.add("absolute")},v=()=>{let e=document.cookie.split("; ");for(let t=0;t<e.length;t++){let s=window.location.hostname.split(".");for(;s.length>0;){let l=location.pathname.split("/"),i=encodeURIComponent(e[t].split(";")[0].split("=")[0])+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; domain="+s.join(".")+" ;path=";for(document.cookie=i+"/";l.length>0;)document.cookie=i+l.join("/"),l.pop();s.shift()}}};p&&(v(),u.classList.add("hidden")),y&&u.classList.add("hidden"),e.classList.add("unload"),s.addEventListener("click",()=>{$()}),l.addEventListener("click",()=>{h()}),c.forEach(e=>{e.addEventListener("click",()=>{h()})}),a.addEventListener("click",()=>{o.classList.contains("max-xl:hidden")?f():b()}),d.addEventListener("click",()=>{v(),u.classList.add("hidden"),sessionStorage.setItem("cookiesDisabled",!0)}),m.addEventListener("click",()=>{u.classList.add("hidden"),sessionStorage.setItem("cookiesConfirmed",!0)});let _=new IntersectionObserver(e=>{e.forEach(e=>{let t=document.querySelectorAll(".circle"),s=document.querySelectorAll(".stats-number");if(e.isIntersecting){s.forEach(e=>{let t=()=>{let s=+e.getAttribute("data-target"),l=+e.innerText,i=s/180;l<s?(e.innerText=Math.ceil(l+i),s<20?setTimeout(t,180):setTimeout(t,20)):e.innerText=s};t()}),t.forEach(e=>{e.classList.add("circle-animation")});return}})});function E(){dataLayer.push(arguments)}null!==t&&_.observe(t),null!==L&&(L.src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d9771.966273609174!2d21.0130558!3d52.2435368!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x471ecd6848ce0bab%3A0xbc9d028629966da9!2sKlaudia%20Sa%C5%82apa%20Ekspert%20Finansowy!5e0!3m2!1spl!2spl!4v1682842491353!5m2!1spl!2spl"),window.dataLayer=window.dataLayer||[],E("js",new Date),E("config","G-CLCK7LHPZ3")});